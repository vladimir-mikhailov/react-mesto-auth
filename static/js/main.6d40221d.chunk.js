(this["webpackJsonpreact-mesto-auth"]=this["webpackJsonpreact-mesto-auth"]||[]).push([[0],{29:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),i=n(21),o=n.n(i),r=(n(29),n(24)),c=n(2),l=n(3),u=Object(a.createContext)(),d=n(15),h=n(16),j="https://mesto.nomoreparties.co/v1/cohort-22",b="de47b0cf-2796-425b-8528-a1fb4932903a",m=new(function(){function e(t){var n=t.baseUrl,a=t.authToken;t.authBaseUrl;Object(d.a)(this,e),this.baseUrl=n,this.authToken=a}return Object(h.a)(e,[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"getCards",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/cards"),{headers:{authorization:this.authToken}}).then((function(t){return e._handleResponse(t)}))}},{key:"addCard",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:{authorization:this.authToken,"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return t._handleResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this.authToken}}).then((function(e){return t._handleResponse(e)}))}},{key:"changeLikeCardStatus",value:function(e,t){var n=this;return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"".concat(t?"DELETE":"PUT"),headers:{authorization:this.authToken}}).then((function(e){return n._handleResponse(e)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/users/me"),{headers:{authorization:this.authToken}}).then((function(t){return e._handleResponse(t)}))}},{key:"setUserInfo",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:this.authToken,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t._handleResponse(e)}))}},{key:"updateUserAvatar",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this.authToken,"Content-Type":"application/json"},body:JSON.stringify({avatar:e.avatar})}).then((function(e){return t._handleResponse(e)}))}}]),e}())({baseUrl:j,authToken:b}),p=new(function(){function e(t){var n=t.baseUrl;Object(d.a)(this,e),this.baseUrl=n}return Object(h.a)(e,[{key:"_handleResponse",value:function(e){return e.ok?e.json():e.json().then(Promise.reject.bind(Promise))}},{key:"getUserData",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return t._handleResponse(e)}))}},{key:"register",value:function(e){var t=this,n=e.email,a=e.password;return fetch("".concat(this.baseUrl,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:a})}).then((function(e){return t._handleResponse(e)}))}},{key:"login",value:function(e){var t=this,n=e.email,a=e.password;return fetch("".concat(this.baseUrl,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:a})}).then((function(e){return t._handleResponse(e)}))}}]),e}())({baseUrl:"https://auth.nomoreparties.co"}),f=function(e){switch(e){case"Incorrect email address or password":return"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 Email \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c.";default:return e}},O=n(8),g=n(0);var v=function(e){var t=e.handleLogout,n=e.userEmail,s=e.loggedIn,i=Object(l.h)().pathname,o=Object(a.useState)(!1),r=Object(c.a)(o,2),u=r[0],d=r[1];return Object(g.jsxs)("header",{className:"header section section_centered",children:[s&&u&&Object(g.jsxs)("div",{className:"header__menu-container",children:[Object(g.jsx)("span",{className:"header__user-email desktop-hidden",children:n}),Object(g.jsx)(O.b,{to:"/sign-in",onClick:function(){d(!1),t()},className:"header__user-auth-link header__user-auth-link_gray header__user-auth-link_burger desktop-hidden",children:"\u0412\u044b\u0439\u0442\u0438"})]}),Object(g.jsxs)("div",{className:"header__main-container",children:[Object(g.jsx)(O.b,{to:s?"/":"/sign-in",className:"header__logo","aria-label":"\u041b\u043e\u0433\u043e\u0442\u0438\u043f",title:"Mesto Russia"}),Object(g.jsx)("div",{className:"\n        ".concat(s?u?"header__user-container button-close button-close_desktop-hidden":"header__user-container header__burger-menu desktop-hidden":"","\n        "),onClick:function(){s&&d(!u)}}),Object(g.jsx)("div",{className:"header__user-container".concat(s?" mobile-hidden":""),children:s?Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("span",{className:"header__user-email mobile-hidden",children:n}),Object(g.jsx)(O.b,{to:"/sign-in",onClick:t,className:"header__user-auth-link header__user-auth-link_gray mobile-hidden",children:"\u0412\u044b\u0439\u0442\u0438"})]}):Object(g.jsx)(g.Fragment,{children:Object(g.jsx)(O.b,{to:"".concat("/sign-in"===i?"/sign-up":"/sign-in"),className:"header__user-auth-link",children:"".concat("/sign-in"===i?"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f":"\u0412\u0445\u043e\u0434")})})})]})]})};var _=function(e){var t=e.card,n=e.onCardClick,s=e.onCardLike,i=e.onCardDelete,o=Object(a.useContext)(u),r=t.owner._id===o._id,c=t.likes.some((function(e){return e._id===o._id}));return Object(g.jsxs)("li",{className:"element",children:[Object(g.jsx)("div",{style:{backgroundImage:"url(".concat(t.link,")")},className:"element__image",onClick:function(){n(t)}}),r&&Object(g.jsx)("button",{className:"trash-button",type:"button","aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",name:"delete",onClick:function(){i(t)}}),Object(g.jsxs)("div",{className:"element__bottom-container",children:[Object(g.jsx)("h2",{className:"element__title",children:t.name}),Object(g.jsxs)("div",{className:"element__like-container",children:[Object(g.jsx)("button",{className:"element__like-button".concat(c?" element__like-button_active":""),type:"button","aria-label":"\u041c\u043d\u0435 \u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f",name:"like",onClick:function(){s(t)}}),Object(g.jsx)("span",{className:"element__like-counter ".concat(0===t.likes.length&&"element__like-counter_hidden"),children:t.likes.length})]})]})]})};var x=function(e){var t=e.onEditProfile,n=e.onAddPlace,s=e.onEditAvatar,i=e.onCardClick,o=e.onCardLike,r=e.onCardDelete,c=e.cards,l=Object(a.useContext)(u);return Object(g.jsxs)("main",{className:"main",children:[Object(g.jsxs)("section",{className:"profile section section_centered",children:[Object(g.jsx)("div",{className:"profile__avatar-container",onClick:s,children:Object(g.jsx)("div",{style:{backgroundImage:"url(".concat(l.avatar,")")},className:"profile__avatar"})}),Object(g.jsxs)("div",{className:"profile__info",children:[Object(g.jsxs)("div",{className:"profile__name-container",children:[Object(g.jsx)("h1",{className:"profile__name",children:l.name}),Object(g.jsx)("button",{className:"profile__edit-button",type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",onClick:t})]}),Object(g.jsx)("p",{className:"profile__description",children:l.about})]}),Object(g.jsx)("button",{className:"profile__add-button",type:"button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e",name:"add-card",onClick:n})]}),Object(g.jsx)("section",{className:"section section_centered","aria-label":"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",children:Object(g.jsx)("ul",{className:"elements",children:c.map((function(e){return Object(g.jsx)(_,{card:e,onCardClick:i,onCardLike:o,onCardDelete:r},e._id)}))})})]})};var C=function(){return Object(g.jsx)("footer",{className:"footer section section_centered",children:Object(g.jsxs)("p",{className:"footer__copyright",children:["\xa9 ",(new Date).getFullYear()," Mesto Russia"]})})},k=function(e){var t=e.title,n=e.name,a=e.onSubmit,s=e.children,i=e.isFormValid,o=e.isSaving,r=e.buttonValues,c=e.isPopup;return Object(g.jsxs)("form",{className:"form".concat(c?" form_popup":""),name:n,onSubmit:a,noValidate:!0,children:[Object(g.jsx)("h2",{className:"form__title".concat(c?" form__title_popup":""),children:t}),s,Object(g.jsx)("button",{className:"form__button".concat(c?" form__button_popup":"").concat(i?"":c?" form__button_disabled":""),type:"submit","aria-label":r.default,name:n,disabled:!i,children:o?r.isSaving:r.default})]})},S=function(e){var t=e.children,n=e.isOpen,a=e.onClose,s=e.type;return Object(g.jsx)("div",{className:"popup popup_type_".concat(s).concat(n?" popup_open":""),onClick:function(e){e.target===e.currentTarget&&a()},children:Object(g.jsxs)("div",{className:"popup__container popup__container_type_".concat(s),children:[Object(g.jsx)("button",{className:"popup__button-close popup__button-close_mobile-centered",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u043f\u0430\u043f",onClick:a}),t]})})};var y=function(e){var t=e.title,n=e.name,a=e.isPopup,s=e.isOpen,i=e.onClose,o=e.onSubmit,r=e.children,c=e.isFormValid,l=e.isSaving,u=e.buttonValues;return Object(g.jsx)(S,{onClose:i,isOpen:s,type:"form",children:Object(g.jsx)(k,{title:t,name:n,isPopup:a,onSubmit:o,isFormValid:c,isSaving:l,buttonValues:u,children:r})})},N=function(e){var t=e.type,n=e.name,a=e.placeholder,s=e.isPopup,i=e.minLength,o=e.maxLength,r=e.required,c=e.onChange,l=e.value,u=e.error;return Object(g.jsxs)(g.Fragment,{children:[Object(g.jsx)("input",{type:t,className:"form__input".concat(s?" form__input_popup":""),name:n,placeholder:a,minLength:i,maxLength:o,required:r,onChange:c,value:l}),Object(g.jsx)("span",{className:"form__input-error".concat(""===u?"":" form__input-error_visible"),children:u})]})},P=n(13),L=n(10);function U(){var e=Object(a.useState)({}),t=Object(c.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)({}),o=Object(c.a)(i,2),r=o[0],l=o[1],u=Object(a.useState)(!0),d=Object(c.a)(u,2),h=d[0],j=d[1],b=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s(e),l(t),j(n)}),[s,l,j]);return{values:n,handleChange:function(e){var t=e.target,a=t.name,i=t.value;s(Object(L.a)(Object(L.a)({},n),{},Object(P.a)({},a,i))),l(Object(L.a)(Object(L.a)({},r),{},Object(P.a)({},a,e.target.validationMessage))),j(e.target.closest("form").checkValidity())},errors:r,isFormValid:h,resetForm:b,setValues:s,setIsFormValid:j}}var w=function(e){var t=e.isOpen,n=e.onClose,s=e.onUpdateUser,i=e.isSaving,o=(e.handleClickOnOverlay,Object(a.useContext)(u)),r=U(),c=r.values,l=r.setValues,d=r.errors,h=r.isFormValid,j=r.setIsFormValid,b=r.handleChange,m=r.resetForm;return Object(a.useEffect)((function(){m(o,{},!0)}),[t,o,j,m,l]),Object(g.jsxs)(y,{name:"edit-form",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",isPopup:!0,isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),s(c)},isFormValid:h,isSaving:i,buttonValues:{isSaving:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",default:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},children:[Object(g.jsx)(N,{name:"name",placeholder:"\u0418\u043c\u044f",type:"text",isPopup:!0,minLength:"2",maxLength:"40",required:!0,onChange:b,value:c.name||"",error:d.name||""}),Object(g.jsx)(N,{name:"about",placeholder:"\u041e \u0441\u0435\u0431\u0435",type:"text",isPopup:!0,minLength:"2",maxLength:"200",required:!0,onChange:b,value:c.about||"",error:d.about||""})]})};var F=function(e){var t=e.card,n=e.isOpen,a=e.onClose;return Object(g.jsx)(S,{onClose:a,isOpen:n,type:"big-image",children:Object(g.jsxs)("figure",{className:"figure",children:[Object(g.jsx)("img",{src:t.link,alt:t.name,className:"big-image"}),Object(g.jsx)("figcaption",{className:"big-image-caption",children:t.name})]})})};var T=function(e){var t=e.isOpen,n=e.onClose,s=e.onUpdateAvatar,i=e.isSaving,o=U(),r=o.errors,c=o.values,l=o.isFormValid,u=o.handleChange,d=o.resetForm;return Object(a.useEffect)((function(){return d()}),[d,t]),Object(g.jsx)(y,{name:"update-avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:t,isPopup:!0,onClose:n,onSubmit:function(e){e.preventDefault(),s({avatar:c.avatar}),d()},isFormValid:l,isSaving:i,buttonValues:{isSaving:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",default:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},children:Object(g.jsx)(N,{type:"url",name:"avatar",isPopup:!0,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",required:!0,onChange:u,value:c.avatar||"",error:r.avatar||""})})};var V=function(e){var t=e.isOpen,n=e.onClose,s=e.onAddPlace,i=e.isSaving,o=U(),r=o.values,c=o.errors,l=o.isFormValid,u=o.handleChange,d=o.resetForm;return Object(a.useEffect)((function(){d()}),[t,d]),Object(g.jsxs)(y,{name:"add-card-form",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",isPopup:!0,isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),s(r)},isFormValid:l,isSaving:i,buttonValues:{isSaving:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435...",default:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"},children:[Object(g.jsx)(N,{type:"text",name:"name",isPopup:!0,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",minLength:"2",maxLength:"30",required:!0,onChange:u,value:r.name||"",error:c.name||""}),Object(g.jsx)(N,{type:"url",name:"link",isPopup:!0,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,onChange:u,value:r.link||"",error:c.link||""})]})};var E=function(e){var t=e.isOpen,n=e.onClose,a=e.isSaving,s=e.card,i=e.onDelete;return Object(g.jsx)(y,{name:"card-delete",title:"\u0423\u0432\u0435\u0440\u0435\u043d\u044b?",isOpen:t,isPopup:!0,onClose:n,onSubmit:function(e){e.preventDefault(),i(s)},isSaving:a,isFormValid:!0,buttonValues:{isSaving:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...",default:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}})},I=n(23),D=function(e){var t=e.component,n=Object(I.a)(e,["component"]);return Object(g.jsx)(l.b,{children:function(){return n.loggedIn?Object(g.jsx)(t,Object(L.a)({},n)):Object(g.jsx)(l.a,{to:"./sign-in"})}})},R=function(e){var t=e.handleRegister,n=e.isSaving,s=e.isPopup,i=U(),o=i.values,r=i.errors,c=i.isFormValid,l=i.handleChange,u=i.resetForm;Object(a.useEffect)((function(){return u()}),[u]);return Object(g.jsxs)("main",{className:"main section section_centered form__container",children:[Object(g.jsxs)(k,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",name:"register",isPopup:s,onSubmit:function(e){e.preventDefault();var n=o.email,a=o.password;t({email:n,password:a}),u()},isFormValid:c,isSaving:n,buttonValues:{isSaving:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f...",default:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"},children:[Object(g.jsx)(N,{name:"email",placeholder:"Email",type:"email",isPopup:s,minLength:"2",maxLength:"40",required:!0,onChange:l,value:o.email||"",error:r.email||""}),Object(g.jsx)(N,{name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",isPopup:s,minLength:"6",maxLength:"40",required:!0,onChange:l,value:o.password||"",error:r.password||""})]}),Object(g.jsxs)("span",{className:"form__bottom-text",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"," ",Object(g.jsx)(O.b,{to:"/sign-in",className:"form__bottom-link",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},A=function(e){var t=e.handleLogin,n=e.isSaving,s=e.isPopup,i=U(),o=i.values,r=i.errors,c=i.isFormValid,l=i.handleChange,u=i.resetForm;Object(a.useEffect)((function(){return u()}),[u]);return Object(g.jsx)("main",{className:"main section section_centered form__container",children:Object(g.jsxs)(k,{title:"\u0412\u0445\u043e\u0434",name:"login",isPopup:s,onSubmit:function(e){e.preventDefault();var n=o.email,a=o.password;t({email:n,password:a})},isFormValid:c,isSaving:n,buttonValues:{isSaving:"\u0412\u0445\u043e\u0434...",default:"\u0412\u043e\u0439\u0442\u0438"},children:[Object(g.jsx)(N,{name:"email",placeholder:"Email",type:"email",isPopup:s,minLength:"1",maxLength:"40",required:!0,onChange:l,value:o.email||"",error:r.email||""}),Object(g.jsx)(N,{name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",isPopup:s,minLength:"1",maxLength:"40",required:!0,onChange:l,value:o.password||"",error:r.password||""})]})})},q=function(e){var t=e.type,n=e.isOpen,a=e.onClose,s=e.message;return Object(g.jsxs)(S,{onClose:a,isOpen:n,type:"form",children:[Object(g.jsx)("div",{className:"popup__image".concat(t?" popup__image_type_".concat(t):"")}),Object(g.jsx)("p",{className:"popup__message",children:s})]})};var z=function(){var e=Object(a.useState)(!1),t=Object(c.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)(!1),o=Object(c.a)(i,2),d=o[0],h=o[1],j=Object(a.useState)(!1),b=Object(c.a)(j,2),O=b[0],_=b[1],k=Object(a.useState)(!1),S=Object(c.a)(k,2),y=S[0],N=S[1],P=Object(a.useState)(!1),L=Object(c.a)(P,2),U=L[0],I=L[1],z=Object(a.useState)(!1),J=Object(c.a)(z,2),B=J[0],M=J[1],H=Object(a.useState)({}),G=Object(c.a)(H,2),Y=G[0],K=G[1],Q=Object(a.useState)({}),W=Object(c.a)(Q,2),X=W[0],Z=W[1],$=Object(a.useState)([]),ee=Object(c.a)($,2),te=ee[0],ne=ee[1],ae=Object(a.useState)(!1),se=Object(c.a)(ae,2),ie=se[0],oe=se[1],re=Object(a.useState)({}),ce=Object(c.a)(re,2),le=ce[0],ue=ce[1],de=Object(a.useState)(""),he=Object(c.a)(de,2),je=he[0],be=he[1],me=Object(a.useState)(""),pe=Object(c.a)(me,2),fe=pe[0],Oe=pe[1],ge=Object(a.useState)(!0),ve=Object(c.a)(ge,2),_e=ve[0],xe=ve[1],Ce=Object(a.useState)({email:"",id:""}),ke=Object(c.a)(Ce,2),Se=ke[0],ye=ke[1],Ne=Object(l.g)();Object(a.useEffect)((function(){m.getUserInfo().then((function(e){Z(e)})).catch((function(e){return console.log(e)}))}),[]),Object(a.useEffect)((function(){m.getCards().then((function(e){ne(e)})).catch((function(e){return console.log(e)}))}),[]),Object(a.useEffect)((function(){document.addEventListener("keydown",(function(e){"Escape"===e.key&&Le()}))}),[]);var Pe=function(){if(localStorage.getItem("jwt")){var e=localStorage.getItem("jwt");p.getUserData(e).then((function(e){e&&(xe(!0),ye({id:e.data._id,email:e.data.email}))})).catch((function(e){console.log(e),xe(!1)}))}else xe(!1)};function Le(){s(!1),h(!1),_(!1),N(!1),I(!1),M(!1),K({}),be(""),Oe(""),setTimeout((function(){return oe(!1)}),300)}return Object(a.useEffect)((function(){return Pe()}),[]),Object(g.jsx)(u.Provider,{value:X,children:Object(g.jsxs)("div",{className:"page",children:[Object(g.jsx)(v,{handleLogout:function(){localStorage.removeItem("jwt"),xe(!1),ye({email:"",id:""}),Ne.push("/sign-in")},userEmail:Se.email,loggedIn:_e}),Object(g.jsxs)(l.d,{children:[Object(g.jsx)(D,{exact:!0,path:"/",loggedIn:_e,component:x,onEditProfile:function(){h(!0)},onAddPlace:function(){_(!0)},onEditAvatar:function(){s(!0)},onCardClick:function(e){K(e),N(!0)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===X._id}));m.changeLikeCardStatus(e._id,t).then((function(t){ne((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){return console.log(e)}))},onCardDelete:function(e){ue(e),I(!0)},cards:te}),Object(g.jsx)(l.b,{path:"/sign-up",children:Object(g.jsx)(R,{handleRegister:function(e){oe(!0),p.register(e).then((function(e){e&&(oe(!1),be("success"),Oe("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"),M(!0),setTimeout((function(){Ne.push("/sign-in"),Le()}),5e3))})).catch((function(e){e&&(oe(!1),be("error"),Oe("".concat(e.error||e.message,".\n          \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.")),M(!0))}))},isSaving:ie,isPopup:!1})}),Object(g.jsxs)(l.b,{path:"/sign-in",children:[_e&&Object(g.jsx)(l.a,{to:"/"}),Object(g.jsx)(A,{handleLogin:function(e){var t=e.email,n=e.password;oe(!0),p.login({email:t,password:n}).then((function(e){e&&(localStorage.setItem("jwt",e.token),xe(!0),Pe(),oe(!1))})).catch((function(e){oe(!1),be("error"),Oe(f(e.error||e.message)),M(!0)}))},isSaving:ie,isPopup:!1})]}),Object(g.jsx)(l.b,{path:"*",children:Object(g.jsx)(l.a,{to:_e?"/":"/sign-in"})})]}),Object(g.jsx)(C,{}),Object(g.jsx)(T,{isOpen:n,onClose:Le,onUpdateAvatar:function(e){oe(!0),m.updateUserAvatar(e).then((function(e){Z(e),Le()})).catch((function(e){return console.log(e)}))},isSaving:ie}),Object(g.jsx)(w,{isOpen:d,onClose:Le,onUpdateUser:function(e){oe(!0),m.setUserInfo(e).then((function(e){Z(e),Le()})).catch((function(e){return console.log(e)}))},isSaving:ie}),Object(g.jsx)(V,{isOpen:O,onClose:Le,onAddPlace:function(e){oe(!0),m.addCard(e).then((function(e){ne([e].concat(Object(r.a)(te))),Le()})).catch((function(e){return console.log(e)}))},isSaving:ie}),Object(g.jsx)(F,{card:Y,isOpen:y,onClose:Le}),Object(g.jsx)(E,{isOpen:U,onDelete:function(e){oe(!0),m.deleteCard(e._id).then((function(t){ne(te.filter((function(t){return t._id!==e._id}))),Le()})).catch((function(e){return console.log(e)}))},card:le,onClose:Le,isSaving:ie}),Object(g.jsx)(q,{isOpen:B,onClose:function(e){e&&Ne.push("/sign-in"),Le()},type:je,message:fe})]})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),s(e),i(e),o(e)}))};o.a.render(Object(g.jsx)(s.a.StrictMode,{children:Object(g.jsx)(O.a,{children:Object(g.jsx)(z,{})})}),document.getElementById("root")),J()}},[[39,1,2]]]);
//# sourceMappingURL=main.6d40221d.chunk.js.map
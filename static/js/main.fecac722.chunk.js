(this["webpackJsonpreact-mesto-auth"]=this["webpackJsonpreact-mesto-auth"]||[]).push([[0],{29:function(e,t,n){},39:function(e,t,n){"use strict";n.r(t);var a=n(1),s=n.n(a),i=n(21),o=n.n(i),c=(n(29),n(24)),r=n(2),l=n(3),u=Object(a.createContext)(),d=Object(a.createContext)(),h=n(15),p=n(16),b="https://mesto.nomoreparties.co/v1/cohort-22",j="de47b0cf-2796-425b-8528-a1fb4932903a",m=new(function(){function e(t){var n=t.baseUrl,a=t.authToken;t.authBaseUrl;Object(h.a)(this,e),this.baseUrl=n,this.authToken=a}return Object(p.a)(e,[{key:"_handleResponse",value:function(e){return e.ok?e.json():Promise.reject("\u041e\u0448\u0438\u0431\u043a\u0430: ".concat(e.status))}},{key:"getCards",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/cards"),{headers:{authorization:this.authToken}}).then((function(t){return e._handleResponse(t)}))}},{key:"addCard",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards"),{method:"POST",headers:{authorization:this.authToken,"Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return t._handleResponse(e)}))}},{key:"deleteCard",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/cards/").concat(e),{method:"DELETE",headers:{authorization:this.authToken}}).then((function(e){return t._handleResponse(e)}))}},{key:"changeLikeCardStatus",value:function(e,t){var n=this;return fetch("".concat(this.baseUrl,"/cards/likes/").concat(e),{method:"".concat(t?"DELETE":"PUT"),headers:{authorization:this.authToken}}).then((function(e){return n._handleResponse(e)}))}},{key:"getUserInfo",value:function(){var e=this;return fetch("".concat(this.baseUrl,"/users/me"),{headers:{authorization:this.authToken}}).then((function(t){return e._handleResponse(t)}))}},{key:"setUserInfo",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/users/me"),{method:"PATCH",headers:{authorization:this.authToken,"Content-Type":"application/json"},body:JSON.stringify({name:e.name,about:e.about})}).then((function(e){return t._handleResponse(e)}))}},{key:"updateUserAvatar",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/users/me/avatar"),{method:"PATCH",headers:{authorization:this.authToken,"Content-Type":"application/json"},body:JSON.stringify({avatar:e.avatar})}).then((function(e){return t._handleResponse(e)}))}}]),e}())({baseUrl:b,authToken:j}),f=new(function(){function e(t){var n=t.baseUrl;Object(h.a)(this,e),this.baseUrl=n}return Object(p.a)(e,[{key:"_handleResponse",value:function(e){return e.ok?e.json():e.json().then(Promise.reject.bind(Promise))}},{key:"getUserData",value:function(e){var t=this;return fetch("".concat(this.baseUrl,"/users/me"),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(e)}}).then((function(e){return t._handleResponse(e)}))}},{key:"register",value:function(e){var t=this,n=e.email,a=e.password;return fetch("".concat(this.baseUrl,"/signup"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:a})}).then((function(e){return t._handleResponse(e)}))}},{key:"login",value:function(e){var t=this,n=e.email,a=e.password;return fetch("".concat(this.baseUrl,"/signin"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:n,password:a})}).then((function(e){return t._handleResponse(e)}))}}]),e}())({baseUrl:"https://auth.nomoreparties.co"}),O=function(e){switch(e){case"Incorrect email address or password":return"\u041d\u0435\u043f\u0440\u0430\u0432\u0438\u043b\u044c\u043d\u044b\u0439 Email \u0438\u043b\u0438 \u043f\u0430\u0440\u043e\u043b\u044c.";default:return e}},g=n(8),_=n(0);var v=function(e){var t=e.handleLogout,n=e.userEmail,s=e.loggedIn,i=Object(l.h)().pathname,o=Object(a.useState)(!1),c=Object(r.a)(o,2),u=c[0],d=c[1];return Object(_.jsxs)("header",{className:"header section section_centered",children:[s&&u&&Object(_.jsxs)("div",{className:"header__menu-container",children:[Object(_.jsx)("span",{className:"header__user-email desktop-hidden",children:n}),Object(_.jsx)(g.b,{to:"/sign-in",onClick:function(){d(!1),t()},className:"header__user-auth-link header__user-auth-link_gray header__user-auth-link_burger desktop-hidden",children:"\u0412\u044b\u0439\u0442\u0438"})]}),Object(_.jsxs)("div",{className:"header__main-container",children:[Object(_.jsx)(g.b,{to:s?"/":"/sign-in",className:"header__logo","aria-label":"\u041b\u043e\u0433\u043e\u0442\u0438\u043f",title:"Mesto Russia"}),Object(_.jsx)("div",{className:"header__user-container".concat(s?u?" button-close button-close_desktop-hidden":" header__burger-menu":""),onClick:function(){u?d(!1):s&&d(!0)},children:s?Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("span",{className:"header__user-email mobile-hidden",children:n}),Object(_.jsx)(g.b,{to:"/sign-in",onClick:t,className:"header__user-auth-link header__user-auth-link_gray mobile-hidden",children:"\u0412\u044b\u0439\u0442\u0438"})]}):Object(_.jsx)(_.Fragment,{children:Object(_.jsx)(g.b,{to:"".concat("/sign-in"===i?"/sign-up":"/sign-in"),className:"header__user-auth-link",children:"".concat("/sign-in"===i?"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f":"\u0412\u0445\u043e\u0434")})})})]})]})};var x=function(e){var t=e.card,n=e.onCardClick,s=e.onCardLike,i=e.onCardDelete,o=Object(a.useContext)(u),c=t.owner._id===o._id,r=t.likes.some((function(e){return e._id===o._id}));return Object(_.jsxs)("li",{className:"element",children:[Object(_.jsx)("div",{style:{backgroundImage:"url(".concat(t.link,")")},className:"element__image",onClick:function(){n(t)}}),c&&Object(_.jsx)("button",{className:"trash-button",type:"button","aria-label":"\u0423\u0434\u0430\u043b\u0438\u0442\u044c",name:"delete",onClick:function(){i(t)}}),Object(_.jsxs)("div",{className:"element__bottom-container",children:[Object(_.jsx)("h2",{className:"element__title",children:t.name}),Object(_.jsxs)("div",{className:"element__like-container",children:[Object(_.jsx)("button",{className:"element__like-button".concat(r?" element__like-button_active":""),type:"button","aria-label":"\u041c\u043d\u0435 \u043d\u0440\u0430\u0432\u0438\u0442\u0441\u044f",name:"like",onClick:function(){s(t)}}),Object(_.jsx)("span",{className:"element__like-counter ".concat(0===t.likes.length&&"element__like-counter_hidden"),children:t.likes.length})]})]})]})};var C=function(e){var t=e.onEditProfile,n=e.onAddPlace,s=e.onEditAvatar,i=e.onCardClick,o=e.onCardLike,c=e.onCardDelete,r=e.cards,l=Object(a.useContext)(u);return Object(_.jsxs)("main",{className:"main",children:[Object(_.jsxs)("section",{className:"profile section section_centered",children:[Object(_.jsx)("div",{className:"profile__avatar-container",onClick:s,children:Object(_.jsx)("div",{style:{backgroundImage:"url(".concat(l.avatar,")")},className:"profile__avatar"})}),Object(_.jsxs)("div",{className:"profile__info",children:[Object(_.jsxs)("div",{className:"profile__name-container",children:[Object(_.jsx)("h1",{className:"profile__name",children:l.name}),Object(_.jsx)("button",{className:"profile__edit-button",type:"button","aria-label":"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",onClick:t})]}),Object(_.jsx)("p",{className:"profile__description",children:l.about})]}),Object(_.jsx)("button",{className:"profile__add-button",type:"button","aria-label":"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u0444\u043e\u0442\u043e",name:"add-card",onClick:n})]}),Object(_.jsx)("section",{className:"section section_centered","aria-label":"\u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 \u043f\u043e\u043b\u044c\u0437\u043e\u0432\u0430\u0442\u0435\u043b\u044f",children:Object(_.jsx)("ul",{className:"elements",children:r.map((function(e){return Object(_.jsx)(x,{card:e,onCardClick:i,onCardLike:o,onCardDelete:c},e._id)}))})})]})};var k=function(){return Object(_.jsx)("footer",{className:"footer section section_centered",children:Object(_.jsx)("p",{className:"footer__copyright",children:"\xa9 2020 Mesto Russia"})})},S=function(e){var t=e.title,n=e.name,a=e.onSubmit,s=e.children,i=e.isFormValid,o=e.isSaving,c=e.buttonValues,r=e.isPopup;return Object(_.jsxs)("form",{className:"form".concat(r?" form_popup":""),name:n,onSubmit:a,noValidate:!0,children:[Object(_.jsx)("h2",{className:"form__title".concat(r?" form__title_popup":""),children:t}),s,Object(_.jsx)("button",{className:"form__button".concat(r?" form__button_popup":"").concat(i?"":r?" form__button_disabled":""),type:"submit","aria-label":c.default,name:n,disabled:!i,children:o?c.isSaving:c.default})]})};var y=function(e){var t=e.title,n=e.name,s=e.isPopup,i=e.isOpen,o=e.onClose,c=e.onSubmit,r=e.children,l=e.isFormValid,u=e.isSaving,h=e.buttonValues,p=Object(a.useContext)(d);return Object(_.jsx)("div",{className:"popup popup_type_".concat(n).concat(i?" popup_open":""),onClick:p,children:Object(_.jsxs)("div",{className:"popup__container popup__container_type_form",children:[Object(_.jsx)("button",{className:"popup__button-close",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u043f\u0430\u043f",onClick:o}),Object(_.jsx)(S,{title:t,name:n,isPopup:s,onSubmit:c,isFormValid:l,isSaving:u,buttonValues:h,children:r})]})})},N=function(e){var t=e.type,n=e.name,a=e.placeholder,s=e.isPopup,i=e.minLength,o=e.maxLength,c=e.required,r=e.onChange,l=e.value,u=e.error;return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)("input",{type:t,className:"form__input".concat(s?" form__input_popup":""),name:n,placeholder:a,minLength:i,maxLength:o,required:c,onChange:r,value:l}),Object(_.jsx)("span",{className:"form__input-error".concat(""===u?"":" form__input-error_visible"),children:u})]})},P=n(13),L=n(10);function w(){var e=Object(a.useState)({}),t=Object(r.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)({}),o=Object(r.a)(i,2),c=o[0],l=o[1],u=Object(a.useState)(!0),d=Object(r.a)(u,2),h=d[0],p=d[1],b=Object(a.useCallback)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];s(e),l(t),p(n)}),[s,l,p]);return{values:n,handleChange:function(e){var t=e.target,a=t.name,i=t.value;s(Object(L.a)(Object(L.a)({},n),{},Object(P.a)({},a,i))),l(Object(L.a)(Object(L.a)({},c),{},Object(P.a)({},a,e.target.validationMessage))),p(e.target.closest("form").checkValidity())},errors:c,isFormValid:h,resetForm:b,setValues:s,setIsFormValid:p}}var U=function(e){var t=e.isOpen,n=e.onClose,s=e.onUpdateUser,i=e.isSaving,o=(e.handleClickOnOverlay,Object(a.useContext)(u)),c=w(),r=c.values,l=c.setValues,d=c.errors,h=c.isFormValid,p=c.setIsFormValid,b=c.handleChange,j=c.resetForm;return Object(a.useEffect)((function(){j(),l(o),p(!0)}),[t,o,p,j,l]),Object(_.jsxs)(y,{name:"edit-form",title:"\u0420\u0435\u0434\u0430\u043a\u0442\u0438\u0440\u043e\u0432\u0430\u0442\u044c \u043f\u0440\u043e\u0444\u0438\u043b\u044c",isPopup:!0,isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),s(r)},isFormValid:h,isSaving:i,buttonValues:{isSaving:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",default:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},children:[Object(_.jsx)(N,{name:"name",placeholder:"\u0418\u043c\u044f",type:"text",isPopup:!0,minLength:"2",maxLength:"40",required:!0,onChange:b,value:r.name||"",error:d.name||""}),Object(_.jsx)(N,{name:"about",placeholder:"\u041e \u0441\u0435\u0431\u0435",type:"text",isPopup:!0,minLength:"2",maxLength:"200",required:!0,onChange:b,value:r.about||"",error:d.about||""})]})};var F=function(e){var t=e.card,n=e.isOpen,s=e.onClose,i=Object(a.useContext)(d);return Object(_.jsx)("div",{className:"popup popup_type_big-picture".concat(n?" popup_open":""),onClick:i,children:Object(_.jsxs)("div",{className:"popup__container",children:[Object(_.jsx)("button",{className:"popup__button-close",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u043f\u0430\u043f",onClick:s}),Object(_.jsxs)("figure",{className:"figure",children:[Object(_.jsx)("img",{src:t.link,alt:t.name,className:"big-image"}),Object(_.jsx)("figcaption",{className:"big-image-caption",children:t.name})]})]})})};var T=function(e){var t=e.isOpen,n=e.onClose,s=e.onUpdateAvatar,i=e.isSaving,o=w(),c=o.errors,r=o.values,l=o.isFormValid,u=o.handleChange,d=o.resetForm;return Object(a.useEffect)((function(){return d()}),[d,t]),Object(_.jsx)(y,{name:"update-avatar",title:"\u041e\u0431\u043d\u043e\u0432\u0438\u0442\u044c \u0430\u0432\u0430\u0442\u0430\u0440",isOpen:t,isPopup:!0,onClose:n,onSubmit:function(e){e.preventDefault(),s({avatar:r.avatar}),e.target.reset(),d()},isFormValid:l,isSaving:i,buttonValues:{isSaving:"\u0421\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0438\u0435...",default:"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c"},children:Object(_.jsx)(N,{type:"url",name:"avatar",isPopup:!0,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u0435",required:!0,onChange:u,value:r.avatar||"",error:c.avatar||""})})};var V=function(e){var t=e.isOpen,n=e.onClose,s=e.onAddPlace,i=e.isSaving,o=w(),c=o.values,r=o.errors,l=o.isFormValid,u=o.handleChange,d=o.resetForm;return Object(a.useEffect)((function(){return d()}),[d]),Object(a.useEffect)((function(){d()}),[t,d]),Object(_.jsxs)(y,{name:"add-card-form",title:"\u041d\u043e\u0432\u043e\u0435 \u043c\u0435\u0441\u0442\u043e",isPopup:!0,isOpen:t,onClose:n,onSubmit:function(e){e.preventDefault(),s(c)},isFormValid:l,isSaving:i,buttonValues:{isSaving:"\u0421\u043e\u0437\u0434\u0430\u043d\u0438\u0435...",default:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"},children:[Object(_.jsx)(N,{type:"text",name:"name",isPopup:!0,placeholder:"\u041d\u0430\u0437\u0432\u0430\u043d\u0438\u0435",minLength:"2",maxLength:"30",required:!0,onChange:u,value:c.name||"",error:r.name||""}),Object(_.jsx)(N,{type:"url",name:"link",isPopup:!0,placeholder:"\u0421\u0441\u044b\u043b\u043a\u0430 \u043d\u0430 \u043a\u0430\u0440\u0442\u0438\u043d\u043a\u0443",required:!0,onChange:u,value:c.link||"",error:r.link||""})]})};var E=function(e){var t=e.isOpen,n=e.onClose,a=e.isSaving,s=e.card,i=e.onDelete;return Object(_.jsx)(y,{name:"card-delete",title:"\u0423\u0432\u0435\u0440\u0435\u043d\u044b?",isOpen:t,isPopup:!0,onClose:n,onSubmit:function(e){e.preventDefault(),i(s)},isSaving:a,isFormValid:!0,buttonValues:{isSaving:"\u0423\u0434\u0430\u043b\u0435\u043d\u0438\u0435...",default:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"}})},I=n(23),D=function(e){var t=e.component,n=Object(I.a)(e,["component"]);return Object(_.jsx)(l.b,{children:function(){return n.loggedIn?Object(_.jsx)(t,Object(L.a)({},n)):Object(_.jsx)(l.a,{to:"./sign-in"})}})},R=function(e){var t=e.handleRegister,n=e.isSaving,s=e.isPopup,i=w(),o=i.values,c=i.errors,r=i.isFormValid,l=i.handleChange,u=i.resetForm;Object(a.useEffect)((function(){return u()}),[u]);return Object(_.jsxs)("main",{className:"main section section_centered form__container",children:[Object(_.jsxs)(S,{title:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f",name:"register",isPopup:s,onSubmit:function(e){e.preventDefault();var n=o.email,a=o.password;t({email:n,password:a}),u()},isFormValid:r,isSaving:n,buttonValues:{isSaving:"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044f...",default:"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u0442\u044c\u0441\u044f"},children:[Object(_.jsx)(N,{name:"email",placeholder:"Email",type:"email",isPopup:s,minLength:"2",maxLength:"40",required:!0,onChange:l,value:o.email||"",error:c.email||""}),Object(_.jsx)(N,{name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",isPopup:s,minLength:"6",maxLength:"40",required:!0,onChange:l,value:o.password||"",error:c.password||""})]}),Object(_.jsxs)("span",{className:"form__bottom-text",children:["\u0423\u0436\u0435 \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043d\u044b?"," ",Object(_.jsx)(g.b,{to:"/sign-in",className:"form__bottom-link",children:"\u0412\u043e\u0439\u0442\u0438"})]})]})},A=function(e){var t=e.handleLogin,n=e.isSaving,s=e.isPopup,i=w(),o=i.values,c=i.errors,r=i.isFormValid,l=i.handleChange,u=i.resetForm;Object(a.useEffect)((function(){return u()}),[u]);return Object(_.jsx)("main",{className:"main section section_centered form__container",children:Object(_.jsxs)(S,{title:"\u0412\u0445\u043e\u0434",name:"login",isPopup:s,onSubmit:function(e){e.preventDefault();var n=o.email,a=o.password;t({email:n,password:a})},isFormValid:r,isSaving:n,buttonValues:{isSaving:"\u0412\u0445\u043e\u0434...",default:"\u0412\u043e\u0439\u0442\u0438"},children:[Object(_.jsx)(N,{name:"email",placeholder:"Email",type:"email",isPopup:s,minLength:"1",maxLength:"40",required:!0,onChange:l,value:o.email||"",error:c.email||""}),Object(_.jsx)(N,{name:"password",placeholder:"\u041f\u0430\u0440\u043e\u043b\u044c",type:"password",isPopup:s,minLength:"1",maxLength:"40",required:!0,onChange:l,value:o.password||"",error:c.password||""})]})})},q=function(e){var t=e.type,n=e.isOpen,s=e.onClose,i=e.message,o=Object(a.useContext)(d);return Object(_.jsx)("div",{className:"popup".concat(n?" popup_open":""),onClick:o,children:Object(_.jsxs)("div",{className:"popup__container popup__container_type_form",children:[Object(_.jsx)("button",{className:"popup__button-close popup__button-close_mobile-centered",type:"button","aria-label":"\u0417\u0430\u043a\u0440\u044b\u0442\u044c \u043f\u043e\u043f\u0430\u043f",onClick:s}),Object(_.jsx)("div",{className:"popup__image".concat(t?" popup__image_type_".concat(t):"")}),Object(_.jsx)("p",{className:"popup__message",children:i})]})})};var z=function(){var e=Object(a.useState)(!1),t=Object(r.a)(e,2),n=t[0],s=t[1],i=Object(a.useState)(!1),o=Object(r.a)(i,2),h=o[0],p=o[1],b=Object(a.useState)(!1),j=Object(r.a)(b,2),g=j[0],x=j[1],S=Object(a.useState)(!1),y=Object(r.a)(S,2),N=y[0],P=y[1],L=Object(a.useState)(!1),w=Object(r.a)(L,2),I=w[0],z=w[1],J=Object(a.useState)(!1),B=Object(r.a)(J,2),M=B[0],H=B[1],G=Object(a.useState)({}),K=Object(r.a)(G,2),Q=K[0],W=K[1],X=Object(a.useState)({}),Y=Object(r.a)(X,2),Z=Y[0],$=Y[1],ee=Object(a.useState)([]),te=Object(r.a)(ee,2),ne=te[0],ae=te[1],se=Object(a.useState)(!1),ie=Object(r.a)(se,2),oe=ie[0],ce=ie[1],re=Object(a.useState)({}),le=Object(r.a)(re,2),ue=le[0],de=le[1],he=Object(a.useState)(""),pe=Object(r.a)(he,2),be=pe[0],je=pe[1],me=Object(a.useState)(""),fe=Object(r.a)(me,2),Oe=fe[0],ge=fe[1],_e=Object(a.useState)(!1),ve=Object(r.a)(_e,2),xe=ve[0],Ce=ve[1],ke=Object(a.useState)({email:"",id:""}),Se=Object(r.a)(ke,2),ye=Se[0],Ne=Se[1],Pe=Object(l.g)();function Le(){s(!1),p(!1),x(!1),P(!1),z(!1),H(!1),W({}),je(""),ge(""),setTimeout((function(){return ce(!1)}),300)}return Object(a.useEffect)((function(){m.getUserInfo().then((function(e){$(e)})).catch((function(e){return console.log(e)}))}),[]),Object(a.useEffect)((function(){m.getCards().then((function(e){ae(e)})).catch((function(e){return console.log(e)}))}),[]),Object(a.useEffect)((function(){document.addEventListener("keydown",(function(e){"Escape"===e.key&&Le()}))}),[]),Object(a.useEffect)((function(){localStorage.getItem("jwt")&&localStorage.removeItem("jwt")}),[]),Object(_.jsx)(d.Provider,{value:function(e){e.target===e.currentTarget&&Le()},children:Object(_.jsx)(u.Provider,{value:Z,children:Object(_.jsxs)("div",{className:"page",children:[Object(_.jsx)(v,{handleLogout:function(){localStorage.removeItem("jwt"),Ce(!1),Ne({email:"",id:""}),Pe.push("/sign-in")},userEmail:ye.email,loggedIn:xe}),Object(_.jsxs)(l.d,{children:[Object(_.jsx)(D,{exact:!0,path:"/",loggedIn:xe,component:C,onEditProfile:function(){p(!0)},onAddPlace:function(){x(!0)},onEditAvatar:function(){s(!0)},onCardClick:function(e){W(e),P(!0)},onCardLike:function(e){var t=e.likes.some((function(e){return e._id===Z._id}));m.changeLikeCardStatus(e._id,t).then((function(t){ae((function(n){return n.map((function(n){return n._id===e._id?t:n}))}))})).catch((function(e){return console.log(e)}))},onCardDelete:function(e){de(e),z(!0)},cards:ne}),Object(_.jsx)(l.b,{path:"/sign-up",children:Object(_.jsx)(R,{handleRegister:function(e){ce(!0),f.register(e).then((function(e){e&&(ce(!1),je("success"),ge("\u0412\u044b \u0443\u0441\u043f\u0435\u0448\u043d\u043e \u0437\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043e\u0432\u0430\u043b\u0438\u0441\u044c!"),H(!0),setTimeout((function(){Pe.push("/sign-in"),Le()}),5e3))})).catch((function(e){e&&(ce(!1),je("error"),ge("".concat(e.error||e.message,".\n          \u041f\u043e\u043f\u0440\u043e\u0431\u0443\u0439\u0442\u0435 \u0435\u0449\u0451 \u0440\u0430\u0437.")),H(!0))}))},isSaving:oe,isPopup:!1})}),Object(_.jsxs)(l.b,{path:"/sign-in",children:[xe&&Object(_.jsx)(l.a,{to:"/"}),Object(_.jsx)(A,{handleLogin:function(e){var t=e.email,n=e.password;ce(!0),f.login({email:t,password:n}).then((function(e){e&&(localStorage.setItem("jwt",e.token),Ce(!0),function(){if(localStorage.getItem("jwt")){var e=localStorage.getItem("jwt");f.getUserData(e).then((function(e){e&&(Ce(!0),Ne({id:e.data._id,email:e.data.email}))})).catch((function(e){console.log(e)}))}}(),ce(!1))})).catch((function(e){ce(!1),je("error"),ge(O(e.error||e.message)),H(!0)}))},isSaving:oe,isPopup:!1})]}),Object(_.jsx)(l.b,{path:"*",children:Object(_.jsx)(l.a,{to:xe?"/":"/sign-in"})})]}),Object(_.jsx)(k,{}),Object(_.jsx)(T,{isOpen:n,onClose:Le,onUpdateAvatar:function(e){ce(!0),m.updateUserAvatar(e).then((function(e){$(e),Le()})).catch((function(e){return console.log(e)}))},isSaving:oe}),Object(_.jsx)(U,{isOpen:h,onClose:Le,onUpdateUser:function(e){ce(!0),m.setUserInfo(e).then((function(e){$(e),Le()})).catch((function(e){return console.log(e)}))},isSaving:oe}),Object(_.jsx)(V,{isOpen:g,onClose:Le,onAddPlace:function(e){ce(!0),m.addCard(e).then((function(e){ae([e].concat(Object(c.a)(ne))),Le()})).catch((function(e){return console.log(e)}))},isSaving:oe}),Object(_.jsx)(F,{card:Q,isOpen:N,onClose:Le}),Object(_.jsx)(E,{isOpen:I,onDelete:function(e){ce(!0),m.deleteCard(e._id).then((function(t){ae(ne.filter((function(t){return t._id!==e._id}))),Le()})).catch((function(e){return console.log(e)}))},card:ue,onClose:Le,isSaving:oe}),Object(_.jsx)(q,{isOpen:M,onClose:function(e){e&&Pe.push("/sign-in"),Le()},type:be,message:Oe})]})})})},J=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,40)).then((function(t){var n=t.getCLS,a=t.getFID,s=t.getFCP,i=t.getLCP,o=t.getTTFB;n(e),a(e),s(e),i(e),o(e)}))};o.a.render(Object(_.jsx)(s.a.StrictMode,{children:Object(_.jsx)(g.a,{children:Object(_.jsx)(z,{})})}),document.getElementById("root")),J()}},[[39,1,2]]]);
//# sourceMappingURL=main.fecac722.chunk.js.map